<!DOCTYPE html>
<html lang="it">
<head>
    <!-- Aggiungi nell'head del tuo HTML -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestione Richieste - Ferie, Permessi, Malattia</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="loginContainer" class="login-container">
    <div class="login-box">
        <h2>Accesso</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" required>
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" required>
            </div>
            <button type="submit" class="submit-btn">Accedi</button>
            <div class="auth-links">
                <a href="#" id="registerLink">Registrati</a>
                <a href="#" id="resetPasswordLink">Password dimenticata?</a>
            </div>
            
            
        </form>
        <form id="registerForm" style="display:none;">
            <div class="form-group">
                <label for="regName">Nome completo:</label>
                <input type="text" id="regName" required>
            </div>
            <div class="form-group">
                <label for="regEmail">Email:</label>
                <input type="email" id="regEmail" required>
            </div>
            <div class="form-group">
                <label for="regPassword">Password (min 6 caratteri):</label>
                <input type="password" id="regPassword" minlength="6" required>
            </div>
            <button type="submit" class="submit-btn">Registrati</button>
            <div class="auth-links">
                <a href="#" id="loginLink">Hai gi√† un account? Accedi</a>
            </div>
        </form>
        <div id="loginError" class="error-message"></div>
        </div>
        </div>
        <div id="mainContainer" style="display:none;">
      <div id="adminControls" style="display: none;">
    <h2>Pannello Amministratore</h2>
    <div class="admin-actions">
        <button id="registerEmployeeBtn">Registra Dipendente</button>
       <button id="exportPDF" onclick="exportToPDF()">Esporta in PDF</button>
    </div>
    
</div>
    <div class="container">
        <h1>Gestione Richieste</h1>
        <div class="user-menu">
    <span id="loggedInUser"></span>
    <button id="logoutBtn" class="logout-btn">Esci</button>
    <div id="adminFilters" style="margin-bottom: 20px; display: none;">
    <h3>Filtri Ricerca</h3>
    <div class="filter-row">
        <div class="filter-group">
            <label for="filterType">Tipo Richiesta:</label>
            <select id="filterType" class="filter-control">
                <option value="">Tutti</option>
                <option value="Ferie">Ferie</option>
                <option value="Malattia">Malattia</option>
                <option value="Permesso">Permesso</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label for="filterEmployee">Dipendente:</label>
            <input type="text" id="filterEmployee" class="filter-control" placeholder="Nome dipendente">
        </div>
        
       <div class="filter-group">
    <label for="filterYear">Anno:</label>
    <input type="number" id="filterYear" 
           min="2000" max="2030" 
           placeholder="Es. 2025" 
           class="form-control">
</div>
<div class="filter-group">
    <label for="filterMonth">Mese:</label>
    <select id="filterMonth" class="form-control">
        <option value="">Tutti i mesi</option>
        <option value="1">Gennaio</option>
        <option value="2">Febbraio</option>
        <option value="3">Marzo</option>
        <option value="4">Aprile</option>
        <option value="5">Maggio</option>
        <option value="6">Giugno</option>
        <option value="7">Luglio</option>
        <option value="8">Agosto</option>
        <option value="9">Settembre</option>
        <option value="10">Ottobre</option>
        <option value="11">Novembre</option>
        <option value="12">Dicembre</option>
    </select>
</div>
        
        <div class="filter-group">
            <label for="filterStatus">Stato:</label>
            <select id="filterStatus" class="filter-control">
                <option value="">Tutti</option>
                <option value="In attesa">In attesa</option>
                <option value="Approvato">Approvato</option>
                <option value="Rifiutato">Rifiutato</option>
            </select>
        </div>
        
        <button id="applyFilters" class="btn">Applica Filtri</button>
        <button id="resetFilters" class="btn secondary">Reset</button>
        
    </div>
</div>
</div>

<div id="richiesteInviate" >
            <h2>Richieste Inviate</h2>
            <table id="richiesteTable">
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Nome</th>
                        <th>Periodo</th>
                        <th>Dettagli</th>
                        <th>Stato</th>
                        <th id="azioniHeader" style="display:none;">Azioni</th>
                    </tr>
                </thead>
                <tbody id="richiesteBody">
                    <!-- Le richieste verranno aggiunte qui dinamicamente -->
                </tbody>
            </table>
        </div>
        <!-- Form richieste: visibile solo ai dipendenti -->
        <div id="requestForms">
            <div class="tabs">
                <button class="tab-button active" data-tab="ferie">Ferie</button>
                <button class="tab-button" data-tab="malattia">Malattia</button>
                <button class="tab-button" data-tab="permessi">Permessi</button>
            </div>
        
        <div id="ferie" class="tab-content active">
            <h2>Richiesta Ferie</h2>
            <form id="ferieForm">
                <div class="form-group">
                    <label for="ferieNome">Nome e Cognome:</label>
                    <input type="text" id="ferieNome" required>
                </div>
                <div class="form-group">
                    <label for="ferieDataInizio">Data Inizio:</label>
                    <input type="date" id="ferieDataInizio" required>
                </div>
                <div class="form-group">
                    <label for="ferieDataFine">Data Fine:</label>
                    <input type="date" id="ferieDataFine" required>
                </div>
                <div class="form-group">
                    <label for="ferieGiorni">Giorni richiesti:</label>
                    <input type="number" id="ferieGiorni" min="1" required>
                </div>
                <button type="submit" class="submit-btn">Invia Richiesta</button>
            </form>
        </div>
        
        <div id="malattia" class="tab-content">
            <h2>Richiesta Malattia</h2>
            <form id="malattiaForm">
                <div class="form-group">
                    <label for="malattiaNome">Nome e Cognome:</label>
                    <input type="text" id="malattiaNome" required>
                </div>
                <div class="form-group">
                    <label for="malattiaDataInizio">Data Inizio:</label>
                    <input type="date" id="malattiaDataInizio" required>
                </div>
                <div class="form-group">
                    <label for="malattiaDataFine">Data Fine:</label>
                    <input type="date" id="malattiaDataFine" required>
                </div>
                <div class="form-group">
                    <label for="malattiaNumeroCertificato">Numero Certificato:</label>
                    <input type="text" id="malattiaNumeroCertificato" required>
                </div>
                <div class="form-group">
                    <label for="malattiaDataCertificato">Data Certificato:</label>
                    <input type="date" id="malattiaDataCertificato" required>
                </div>
                <button type="submit" class="submit-btn">Invia Richiesta</button>
            </form>
        </div>
        
        <div id="permessi" class="tab-content" >
            <h2>Richiesta Permessi</h2>
            <form id="permessiForm">
                <div class="form-group">
                    <label for="permessiNome">Nome e Cognome:</label>
                    <input type="text" id="permessiNome" required>
                </div>
                <div class="form-group">
                    <label for="permessiData">Data Permesso:</label>
                    <input type="date" id="permessiData" required>
                </div>
                <div class="form-group">
                    <label for="permessiOraInizio">Ora Inizio:</label>
                    <input type="time" id="permessiOraInizio" required>
                </div>
                <div class="form-group">
                    <label for="permessiOraFine">Ora Fine:</label>
                    <input type="time" id="permessiOraFine" required>
                </div>
                <div class="form-group">
                    <label for="permessiMotivazione">Motivazione:</label>
                    <textarea id="permessiMotivazione" rows="3"></textarea>
                </div>
                <button type="submit" class="submit-btn">Invia Richiesta</button>
            </form>
        </div>
        
        
    </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
